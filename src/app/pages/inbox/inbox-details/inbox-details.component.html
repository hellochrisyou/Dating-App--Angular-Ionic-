<ion-content fullscreen="true">
  <ion-header>
    <mat-toolbar color="dark">
      <ion-buttons slot="start">
        <ion-menu-button><i class="fas fa-bars"></i></ion-menu-button>
      </ion-buttons>
      <ion-title class="title-padding">Dating App</ion-title>
    </mat-toolbar>
  </ion-header>
  <ion-refresher slot="fixed" (ionRefresh)="reloadItems($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>


  <ion-card class="speaker-card">
    <ion-card-header>
      <ion-item detail="false" lines="none" class="friend-item">
        <h5>{{otherUserName}}</h5>
      </ion-item>
      <ion-item lines="none">
        <a class="oval" (click)="sendMessage()" matTooltip="Send Message" matTooltipPosition="before">
          Message
        </a>
      </ion-item>
      <ng-container *ngFor="let message of messagingStateService.messages$ | async; trackBy: messagingTrackFn">
        <div class="container">
          <ion-item lines="none">
            <ng-container *ngIf="message.messages.sender===authService.authState.email">
              <div class="chat-bubble">
                <p class="over-flow chat-message">
                  <i>{{message.messages.date | date}}</i>
                  <br>
                  {{message.messages.message}}
                </p>
              </div>
            </ng-container>
            <ng-container *ngIf="message.messages.sender===otherEmail">
              <div class="chat-bubble mine">
                <p class="over-flow chat-message">
                  <i>{{message.messages.date| date}}</i>
                  <br>
                  {{message.messages.message}}
                </p>
              </div>
            </ng-container>
          </ion-item>
        </div>
      </ng-container>

    </ion-card-header>
  </ion-card>

</ion-content>