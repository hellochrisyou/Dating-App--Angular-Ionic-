{"version":3,"sources":["./src/app/pages/account/account.html","./src/app/pages/account/account-routing.module.ts","./src/app/pages/account/account.module.ts","./src/app/pages/account/account.scss","./src/app/pages/account/account.ts"],"names":[],"mappings":"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","file":"pages-account-account-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Account</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"ion-padding-top ion-text-center\\\">\\r\\n    <img src=\\\"{{this.user.photoURL}}\\\" alt=\\\"avatar\\\">\\r\\n    <h2>{{this.user.displayName}}</h2>\\r\\n\\r\\n    <ion-list inset>\\r\\n      <ion-item (click)=\\\"updatePicture()\\\">Update Picture</ion-item>\\r\\n      <ion-item (click)=\\\"changeUsername()\\\">Change Username</ion-item>\\r\\n      <!-- <ion-item (click)=\\\"changePassword()\\\">Change Password</ion-item> -->\\r\\n      <ion-item (click)=\\\"support()\\\">Support</ion-item>\\r\\n      <ion-item (click)=\\\"logout()\\\">Logout</ion-item>\\r\\n    </ion-list>\\r\\n  </div>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { AccountPage } from './account';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AccountPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AccountPageRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AccountPage } from './account';\r\nimport { AccountPageRoutingModule } from './account-routing.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    IonicModule,\r\n    AccountPageRoutingModule\r\n  ],\r\n  declarations: [\r\n    AccountPage,\r\n  ]\r\n})\r\nexport class AccountModule { }\r\n","export default \"img {\\n  max-width: 140px;\\n  border-radius: 50%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvYWNjb3VudC9DOlxcZ2l0aHViXFxtZXNzYWdpbmctYXBwL3NyY1xcYXBwXFxwYWdlc1xcYWNjb3VudFxcYWNjb3VudC5zY3NzIiwic3JjL2FwcC9wYWdlcy9hY2NvdW50L2FjY291bnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFBO0VBQ0Esa0JBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2FjY291bnQvYWNjb3VudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW1nIHtcclxuICBtYXgtd2lkdGg6IDE0MHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxufVxyXG4iLCJpbWcge1xuICBtYXgtd2lkdGg6IDE0MHB4O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG59Il19 */\"","import { User } from './../../shared/models';\r\nimport { AfterViewInit, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AngularFirestore, AngularFirestoreDocument } from '@angular/fire/firestore';\r\n\r\nimport { AlertController } from '@ionic/angular';\r\n\r\nimport { UserData } from '../../providers/user-data';\r\nimport { AuthService } from '../../core/service/auth.service';\r\n\r\n\r\n@Component({\r\n  selector: 'page-account',\r\n  templateUrl: 'account.html',\r\n  styleUrls: ['./account.scss'],\r\n})\r\nexport class AccountPage implements OnInit, AfterViewInit {\r\n\r\n  userRef: AngularFirestoreDocument<any>;\r\n  photoURL: string;\r\n  username: string;\r\n  user: User = {};\r\n  // tslint:disable-next-line: variable-name\r\n  private _authState: any = null;\r\n\r\n  public get authState(): any {\r\n    return this._authState;\r\n  }\r\n  public set authState(value: any) {\r\n    this._authState = value;\r\n  }\r\n\r\n  constructor(\r\n    public authService: AuthService,\r\n    public alertCtrl: AlertController,\r\n    public router: Router,\r\n    public userData: UserData,\r\n    private afs: AngularFirestore,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    console.log('email', this.authService.authState.email);\r\n    this.userRef = this.afs.doc(`users/${this.authService.authState.email}`);\r\n\r\n    this.userRef.get().subscribe(doc => {\r\n      if (!doc.exists) {\r\n        console.log('No such document!');\r\n      } else {\r\n        console.log('Document data:', doc.data());\r\n        this.user = doc.data();\r\n      }\r\n    }, (err => {\r\n      // console.log('Error fetching document: ', err);\r\n    }));\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // this.getUsername();\r\n    this.user.displayName = this.authService.userData.displayName;\r\n    this.user.uId = this.authService.userData.uid;\r\n    this.user.email = this.authService.userData.email;\r\n    this.user.photoURL = this.authService.userData.photoURL;\r\n    console.log('this.user', this.user);\r\n  }\r\n\r\n  async updatePicture() {\r\n    const alert = await this.alertCtrl.create({\r\n      header: 'Change Picture',\r\n      buttons: [\r\n        'Cancel',\r\n        {\r\n          text: 'Ok',\r\n          handler: (data: any) => {\r\n            this.user.photoURL = data.photoUrl;\r\n            this.authService.updateUserData(this.user);\r\n            this.getPhotoURL();\r\n          }\r\n        }\r\n      ],\r\n      inputs: [\r\n        {\r\n          type: 'text',\r\n          name: 'photoUrl',\r\n          value: this.photoURL,\r\n          placeholder: 'photoUrl'\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n  }\r\n  public updateUserData(user) {\r\n    // Sets user data to firestore on login\r\n\r\n\r\n    const data: User = {\r\n      uId: this.authState.uid,\r\n      email: this.authState.email,\r\n      displayName: user.displayName,\r\n      photoURL: user.photoURL,\r\n    };\r\n    return this.userRef.set(data, { merge: true });\r\n  }\r\n  // Present an alert with the current username populated\r\n  // clicking OK will update the username and display it\r\n  // clicking Cancel will close the alert and do nothing\r\n  async changeUsername() {\r\n    const alert = await this.alertCtrl.create({\r\n      header: 'Change Username',\r\n      buttons: [\r\n        'Cancel',\r\n        {\r\n          text: 'Ok',\r\n          handler: (data: any) => {\r\n            this.user.displayName = data.username;\r\n            console.log('handler', this.user);\r\n            this.authService.updateUserData(this.user);\r\n            this.getUsername();\r\n          }\r\n        }\r\n      ],\r\n      inputs: [\r\n        {\r\n          type: 'text',\r\n          name: 'username',\r\n          value: this.username,\r\n          placeholder: 'username'\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  private getUsername() {\r\n    this.username = this.authService.authState.displayName;\r\n  }\r\n\r\n  private getPhotoURL() {\r\n    this.photoURL = this.authService.authState.photoURL;\r\n  }\r\n\r\n  // changePassword() {\r\n  //   console.log('Clicked to change password');\r\n  // }\r\n\r\n  logout() {\r\n    this.userData.logout();\r\n    this.router.navigateByUrl('/login');\r\n  }\r\n\r\n  support() {\r\n    this.router.navigateByUrl('/support');\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}